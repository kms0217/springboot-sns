<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Mygram</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
          integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <link rel="stylesheet" th:href="@{/css/changePassword.css}">
    <link rel="stylesheet" th:href="@{/css/nav.css}">
</head>
<body>
<div th:replace="/nav.html :: fragment-nav"></div>
<div class="content">
    <div class="content-container"
         style="margin-left: 0!important; margin-right: 0!important; margin-top: 30px;height: 90%; border: 1px solid #bdbdbd;">
        <div style="margin: auto; width: 300px; height: 200px">
            <img th:src="@{/image/default-profile.png}" style="border-radius: 50%; width: 56px; height: 56px; margin-bottom: 20px;">
            <button style="font-size: 11px; border: 0; background-color: white; color: #00aeff; padding-top: 10px;"> 프로필 사진 바꾸기 </button>
            <form id="update-form" style="min-width: 100%">
                <input class="change-password-input"
                       name="name"
                       type="text"
                       placeholder="이름"
                       th:value="${user.name} ? ${user.name} : ''"
                >
                <input class="change-password-input"
                       name="username"
                       type="text"
                       placeholder="사용자 이름"
                       th:value="${user.username} ? ${user.username} : ''"
                >
                <input class="change-password-input"
                       name="webSite"
                       type="text"
                       placeholder="웹 사이트"
                       th:value="${user.website} ? ${user.website} : ''"
                >
                <input class="change-password-input"
                       name="intro"
                       type="text"
                       placeholder="소개"
                       th:value="${user.intro} ? ${user.intro} : ''"
                >
                <input class="change-password-input"
                       name="email"
                       type="text"
                       placeholder="이메일"
                       th:value="${user.email} ? ${user.email} : ''"
                >
                <input class="change-password-input"
                       name="phoneNumber"
                       type="text"
                       placeholder="전화번호"
                       th:value="${user.phoneNumber} ? ${user.phoneNumber} : ''"
                >
                <input class="change-password-input"
                       name="gender"
                       type="text"
                       placeholder="성별"
                       th:value="${user.gender} ? ${user.gender} : ''"
                >
                <button type="button" th:attr="onclick=|update('${user.username}')|"
                        class="change-password-button">제출</button>
            </form>
        </div>
    </div>
</div>
<script type="text/javascript">
    function update(userId){
        let data = $("#update-form").serialize();
        alert(data);
        $.ajax({
            type: "put",
            url: '/api/user/${userId}',
            data: data,
            contentType: "application/x-www-form-urlencoded; charset=utf-8",
            dataType: "json"
        }).success({

        }).fail({

        });
    }
</script>
</body>
</html>